{"compilers":[{"contractTypes":["EDGChainE"],"name":"solidity","settings":{"optimizer":{"enabled":true,"runs":200},"outputSelection":{"contracts/EDGChainE.sol":{"":["ast"],"*":["abi","bin-runtime","devdoc","userdoc","evm.bytecode.object","evm.bytecode.sourceMap","evm.deployedBytecode.object"]}}},"version":"0.8.20+commit.a1b79de6"}],"contractTypes":{"EDGChainE":{"abi":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"AccessGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"AccessRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"cid","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"parentCid","type":"bytes32"}],"name":"CommitAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"ContributorAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"ContributorRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":false,"internalType":"bytes32","name":"oldGenesisCid","type":"bytes32"},{"indexed":false,"internalType":"bytes32","name":"newGenesisCid","type":"bytes32"}],"name":"GenesisCidUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"OwnerAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"OwnerRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"projectID","type":"bytes32"},{"indexed":true,"internalType":"address","name":"creator","type":"address"},{"indexed":false,"internalType":"bytes32","name":"genesisCid","type":"bytes32"}],"name":"ProjectCreated","type":"event"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"address","name":"user","type":"address"}],"name":"addContributor","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"address","name":"user","type":"address"}],"name":"addOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"bytes32","name":"newCid","type":"bytes32"},{"internalType":"bytes32","name":"parentCid","type":"bytes32"}],"name":"commitData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"bytes32","name":"genesisCid","type":"bytes32"}],"name":"createProject","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"}],"name":"getGenesisCid","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"}],"name":"getLatestCid","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"bytes32","name":"cid","type":"bytes32"}],"name":"getParentCid","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"address","name":"user","type":"address"}],"name":"removeContributor","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"address","name":"user","type":"address"}],"name":"removeOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"projectID","type":"bytes32"},{"internalType":"bytes32","name":"newGenesisCid","type":"bytes32"}],"name":"updateGenesisCid","outputs":[],"stateMutability":"nonpayable","type":"function"}],"contractName":"EDGChainE","deploymentBytecode":{"bytecode":"0x608060405234801561000f575f80fd5b5061081c8061001d5f395ff3fe608060405234801561000f575f80fd5b506004361061009b575f3560e01c80636193427e116100635780636193427e1461011257806398dccea214610131578063ceb8daae14610144578063f956371d14610157578063fae32de21461016a575f80fd5b8063180f776f1461009f57806323876592146100b45780632b9c190c146100c7578063332a5b85146100da5780635d873122146100ed575b5f80fd5b6100b26100ad366004610721565b61018c565b005b6100b26100c236600461074a565b6102b7565b6100b26100d536600461074a565b610351565b6100b26100e836600461074a565b6103e8565b6101006100fb366004610783565b61047f565b60405190815260200160405180910390f35b6101006101203660046107a3565b5f9081526020819052604090205490565b6100b261013f366004610783565b6104fc565b6100b261015236600461074a565b61058e565b6100b2610165366004610783565b610628565b6101006101783660046107a3565b5f9081526020819052604090206001015490565b5f83815260208181526040808320338452600401909152902054839060ff166101fc5760405162461bcd60e51b815260206004820152601860248201527f4f6e6c792070726f6a65637420636f6e7472696275746f72000000000000000060448201526064015b60405180910390fd5b5f848152602081815260408083208684526002810190925290912054156102525760405162461bcd60e51b815260206004820152600a6024820152694349442065786973747360b01b60448201526064016101f3565b60408051808201825285815260208082018681525f88815260028601909252838220925183555160019283015590830186905590518491869188917f67aad529ff2775f864dc0364f29e049bdbe9bdb035d611b37bc8d511ec41aedf91a45050505050565b5f82815260208181526040808320338452600301909152902054829060ff166102f25760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526003909101909252808320805460ff1916600117905551909185917f7eaba1ee6dfe9665c7225e91dd6cb4d766d5132a8636e401605897869273c3ed9190a3505050565b5f82815260208181526040808320338452600301909152902054829060ff1661038c5760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526003909101909252808320805460ff1916905551909185917fc0bfdd3c5a3ae4138467da6ede117a2826e60715f123819cc79acc0f4b47c14f9190a3505050565b5f82815260208181526040808320338452600301909152902054829060ff166104235760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526004909101909252808320805460ff1916905551909185917f8404f64ec3dd5d08c2b9c95968105c4545f4bc609796b9d769db01f72dadfcf39190a3505050565b5f8281526020818152604080832084845260020190915281205481036104da5760405162461bcd60e51b815260206004820152601060248201526f10dbdb5b5a5d081b9bdd08199bdd5b9960821b60448201526064016101f3565b505f918252602082815260408084209284526002909201905290206001015490565b5f82815260208181526040808320338452600301909152902054829060ff166105375760405162461bcd60e51b81526004016101f3906107ba565b5f8381526020818152604091829020805485825583518181529283018690529092909186917f49337c7dcf5d14b29e09cb67e4050dc58922f29739a9bdc76d8356a536556306910160405180910390a25050505050565b5f82815260208181526040808320338452600301909152902054829060ff166105c95760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526004909101909252808320805460ff1916600117905551909185917f8ede5744ef9e05a2fea6aaf0fe924c6cbd8f93dd463229d1af4d0b86424e81539190a3505050565b5f8281526020818152604080832033845260030190915290205460ff16156106835760405162461bcd60e51b815260206004820152600e60248201526d50726f6a6563742065786973747360901b60448201526064016101f3565b5f82815260208181526040808320338085526003820190935292819020805460ff1916600190811790915584845583018490555184907f24cfde177657bfbe7c6786ddd957b8e8a80279aca4afb6f49f1dd1fe62615377906106e89086815260200190565b60405180910390a3604051339084907f7eaba1ee6dfe9665c7225e91dd6cb4d766d5132a8636e401605897869273c3ed905f90a3505050565b5f805f60608486031215610733575f80fd5b505081359360208301359350604090920135919050565b5f806040838503121561075b575f80fd5b8235915060208301356001600160a01b0381168114610778575f80fd5b809150509250929050565b5f8060408385031215610794575f80fd5b50508035926020909101359150565b5f602082840312156107b3575f80fd5b5035919050565b60208082526012908201527127b7363c90383937b532b1ba1037bbb732b960711b60408201526060019056fea2646970667358221220fbeb008bece087ad31c0f0be06122042d318a80ca162bee408ea293c0cdd48d664736f6c63430008140033"},"devdoc":{"kind":"dev","methods":{},"version":1},"methodIdentifiers":{"addContributor(bytes32,address)":"0xceb8daae","addOwner(bytes32,address)":"0x23876592","commitData(bytes32,bytes32,bytes32)":"0x180f776f","createProject(bytes32,bytes32)":"0xf956371d","getGenesisCid(bytes32)":"0x6193427e","getLatestCid(bytes32)":"0xfae32de2","getParentCid(bytes32,bytes32)":"0x5d873122","removeContributor(bytes32,address)":"0x332a5b85","removeOwner(bytes32,address)":"0x2b9c190c","updateGenesisCid(bytes32,bytes32)":"0x98dccea2"},"runtimeBytecode":{"bytecode":"0x608060405234801561000f575f80fd5b506004361061009b575f3560e01c80636193427e116100635780636193427e1461011257806398dccea214610131578063ceb8daae14610144578063f956371d14610157578063fae32de21461016a575f80fd5b8063180f776f1461009f57806323876592146100b45780632b9c190c146100c7578063332a5b85146100da5780635d873122146100ed575b5f80fd5b6100b26100ad366004610721565b61018c565b005b6100b26100c236600461074a565b6102b7565b6100b26100d536600461074a565b610351565b6100b26100e836600461074a565b6103e8565b6101006100fb366004610783565b61047f565b60405190815260200160405180910390f35b6101006101203660046107a3565b5f9081526020819052604090205490565b6100b261013f366004610783565b6104fc565b6100b261015236600461074a565b61058e565b6100b2610165366004610783565b610628565b6101006101783660046107a3565b5f9081526020819052604090206001015490565b5f83815260208181526040808320338452600401909152902054839060ff166101fc5760405162461bcd60e51b815260206004820152601860248201527f4f6e6c792070726f6a65637420636f6e7472696275746f72000000000000000060448201526064015b60405180910390fd5b5f848152602081815260408083208684526002810190925290912054156102525760405162461bcd60e51b815260206004820152600a6024820152694349442065786973747360b01b60448201526064016101f3565b60408051808201825285815260208082018681525f88815260028601909252838220925183555160019283015590830186905590518491869188917f67aad529ff2775f864dc0364f29e049bdbe9bdb035d611b37bc8d511ec41aedf91a45050505050565b5f82815260208181526040808320338452600301909152902054829060ff166102f25760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526003909101909252808320805460ff1916600117905551909185917f7eaba1ee6dfe9665c7225e91dd6cb4d766d5132a8636e401605897869273c3ed9190a3505050565b5f82815260208181526040808320338452600301909152902054829060ff1661038c5760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526003909101909252808320805460ff1916905551909185917fc0bfdd3c5a3ae4138467da6ede117a2826e60715f123819cc79acc0f4b47c14f9190a3505050565b5f82815260208181526040808320338452600301909152902054829060ff166104235760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526004909101909252808320805460ff1916905551909185917f8404f64ec3dd5d08c2b9c95968105c4545f4bc609796b9d769db01f72dadfcf39190a3505050565b5f8281526020818152604080832084845260020190915281205481036104da5760405162461bcd60e51b815260206004820152601060248201526f10dbdb5b5a5d081b9bdd08199bdd5b9960821b60448201526064016101f3565b505f918252602082815260408084209284526002909201905290206001015490565b5f82815260208181526040808320338452600301909152902054829060ff166105375760405162461bcd60e51b81526004016101f3906107ba565b5f8381526020818152604091829020805485825583518181529283018690529092909186917f49337c7dcf5d14b29e09cb67e4050dc58922f29739a9bdc76d8356a536556306910160405180910390a25050505050565b5f82815260208181526040808320338452600301909152902054829060ff166105c95760405162461bcd60e51b81526004016101f3906107ba565b5f838152602081815260408083206001600160a01b0386168085526004909101909252808320805460ff1916600117905551909185917f8ede5744ef9e05a2fea6aaf0fe924c6cbd8f93dd463229d1af4d0b86424e81539190a3505050565b5f8281526020818152604080832033845260030190915290205460ff16156106835760405162461bcd60e51b815260206004820152600e60248201526d50726f6a6563742065786973747360901b60448201526064016101f3565b5f82815260208181526040808320338085526003820190935292819020805460ff1916600190811790915584845583018490555184907f24cfde177657bfbe7c6786ddd957b8e8a80279aca4afb6f49f1dd1fe62615377906106e89086815260200190565b60405180910390a3604051339084907f7eaba1ee6dfe9665c7225e91dd6cb4d766d5132a8636e401605897869273c3ed905f90a3505050565b5f805f60608486031215610733575f80fd5b505081359360208301359350604090920135919050565b5f806040838503121561075b575f80fd5b8235915060208301356001600160a01b0381168114610778575f80fd5b809150509250929050565b5f8060408385031215610794575f80fd5b50508035926020909101359150565b5f602082840312156107b3575f80fd5b5035919050565b60208082526012908201527127b7363c90383937b532b1ba1037bbb732b960711b60408201526060019056fea2646970667358221220fbeb008bece087ad31c0f0be06122042d318a80ca162bee408ea293c0cdd48d664736f6c63430008140033"},"sourceId":"contracts/EDGChainE.sol","sourcemap":"57:3868:0:-:0;;;;;;;;;;;;;;;;;;;","userdoc":{"kind":"user","methods":{},"version":1}}},"manifest":"ethpm/3","sources":{"contracts/EDGChainE.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\ncontract EDGChainE {\n\n    struct Commit {\n        bytes32 cid;\n        bytes32 parentCid;\n    }\n\n    struct Project {\n        bytes32 genesisCid;\n        bytes32 latestCid;\n        mapping(bytes32 => Commit) commits;\n        mapping(address => bool) owners;\n        mapping(address => bool) contributors;\n    }\n\n    mapping(bytes32 => Project) private projects;\n\n    event ProjectCreated(bytes32 indexed projectID, address indexed creator, bytes32 genesisCid);\n    event CommitAdded(bytes32 indexed projectID, bytes32 indexed cid, bytes32 indexed parentCid);\n    event AccessGranted(bytes32 indexed projectID, address indexed user);\n    event AccessRevoked(bytes32 indexed projectID, address indexed user);\n    event ContributorAdded(bytes32 indexed projectID, address indexed user);\n    event ContributorRemoved(bytes32 indexed projectID, address indexed user);\n    event OwnerAdded(bytes32 indexed projectID, address indexed user);\n    event OwnerRemoved(bytes32 indexed projectID, address indexed user);\n    event GenesisCidUpdated(bytes32 indexed projectID, bytes32 oldGenesisCid, bytes32 newGenesisCid);\n\n    modifier onlyOwner(bytes32 projectID) {\n        require(projects[projectID].owners[msg.sender], \"Only project owner\");\n        _;\n    }\n\n    modifier onlyContributor(bytes32 projectID) {\n        require(projects[projectID].contributors[msg.sender], \"Only project contributor\");\n        _;\n    }\n\n    function createProject(bytes32 projectID, bytes32 genesisCid) external {\n        require(projects[projectID].owners[msg.sender] == false, \"Project exists\");\n        Project storage p = projects[projectID];\n        p.owners[msg.sender] = true;\n        p.genesisCid = genesisCid;\n        p.latestCid = genesisCid;\n\n        emit ProjectCreated(projectID, msg.sender, genesisCid);\n        emit OwnerAdded(projectID, msg.sender);\n    }\n\n    function addOwner(bytes32 projectID, address user) external onlyOwner(projectID) {\n        projects[projectID].owners[user] = true;\n        emit OwnerAdded(projectID, user);\n    }\n\n    function removeOwner(bytes32 projectID, address user) external onlyOwner(projectID) {\n        projects[projectID].owners[user] = false;\n        emit OwnerRemoved(projectID, user);\n    }\n\n    function addContributor(bytes32 projectID, address user) external onlyOwner(projectID) {\n        projects[projectID].contributors[user] = true;\n        emit ContributorAdded(projectID, user);\n    }\n\n    function removeContributor(bytes32 projectID, address user) external onlyOwner(projectID) {\n        projects[projectID].contributors[user] = false;\n        emit ContributorRemoved(projectID, user);\n    }\n\n    function updateGenesisCid(bytes32 projectID, bytes32 newGenesisCid) external onlyOwner(projectID) {\n        Project storage p = projects[projectID];\n        bytes32 oldCid = p.genesisCid;\n        p.genesisCid = newGenesisCid;\n        emit GenesisCidUpdated(projectID, oldCid, newGenesisCid);\n    }\n\n    function commitData(bytes32 projectID, bytes32 newCid, bytes32 parentCid) external onlyContributor(projectID) {\n        Project storage p = projects[projectID];\n        require(p.commits[newCid].cid == 0, \"CID exists\");\n\n        p.commits[newCid] = Commit({\n            cid: newCid,\n            parentCid: parentCid\n        });\n\n        p.latestCid = newCid;\n\n        emit CommitAdded(projectID, newCid, parentCid);\n    }\n\n    function getLatestCid(bytes32 projectID) external view returns (bytes32) {\n        return projects[projectID].latestCid;\n    }\n\n    function getGenesisCid(bytes32 projectID) external view returns (bytes32) {\n        return projects[projectID].genesisCid;\n    }\n\n    function getParentCid(bytes32 projectID, bytes32 cid) external view returns (bytes32) {\n        require(projects[projectID].commits[cid].cid != 0, \"Commit not found\");\n        return projects[projectID].commits[cid].parentCid;\n    }\n}\n","urls":[]}}}